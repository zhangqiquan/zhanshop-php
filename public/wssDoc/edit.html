<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>完善响应说明</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=8">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="/css/animate.css" rel="stylesheet">
    <link href="/css/style.min.css" rel="stylesheet">
    <script type="text/javascript" charset="utf-8" src="/ueditor/ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="/ueditor/ueditor.all.min.js"> </script>
    <!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
    <!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
    <script type="text/javascript" charset="utf-8" src="/ueditor/lang/zh-cn/zh-cn.js"></script>
    <style>
        /* Syntax highlighting for JSON objects */
        pre{
            color: #000;
        }
        ul.json-dict, ol.json-array {
            list-style-type: none;
            margin: 0 0 0 1px;
            border-left: 1px dotted #ccc;
            padding-left: 2em;
        }
        .json-string {
            color: #3ab54a;
            font-weight: bold;
        }
        .json-literal {
            color: #25aae2;
            font-weight: bold;
        }

        /* Toggle button */
        a.json-toggle {
            position: relative;
            color: inherit;
            text-decoration: none;
        }
        a.json-toggle:focus {
            outline: none;
        }
        a.json-toggle:before {
            color: #aaa;
            content: "\25BC"; /* down arrow */
            position: absolute;
            display: inline-block;
            width: 1em;
            left: -1em;
        }
        a.json-toggle.collapsed:before {
            transform: rotate(-90deg); /* Use rotated down arrow, prevents right arrow appearing smaller than down arrow in some browsers */
            -ms-transform: rotate(-90deg);
            -webkit-transform: rotate(-90deg);
        }

        /* Collapsable placeholder links */
        a.json-placeholder {
            color: #aaa;
            padding: 0 1em;
            text-decoration: none;
        }
        a.json-placeholder:hover {
            text-decoration: underline;
        }
        a{
            color: #4d5259;
        }
    </style>
</head>

<body>
<div class="container-fluid p-t-15">

    <div class="row">
        <div class="col-md-12">
            <div class="card">

                <div class="card-header">
                    <h4 id="apiTitle" style="float: left;cursor:pointer;margin-top: 15px;"></h4>
                </div>
                <div class="card-body">
                    <h5>响应说明</h5>
                    <form onsubmit="return apiDocEdit(this)">
                    <script>
                        document.write('<script name="detail" id="editor" type="text/plain" style="width:1024px;height:500px;">'+opener.docData.data.detail+'<\/script>')
                    </script>

                    <div class="tab-content" style="margin-top:10px;padding: 0px; text-align: center;" >
                        <button class="btn btn-primary btn-w-md" type="submit">确定<div></div></button>
                    </div>
                    </form>
                </div>


            </div>
        </div>

    </div>

</div>

<script type="text/javascript" src="/js/jquery.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.min.js"></script>
<!--消息提示-->
<script src="/js/bootstrap-notify.min.js"></script>
<script type="text/javascript" src="/js/lightyear.js"></script>
<script type="text/javascript" src="/js/main.min.js"></script>
<script type="text/javascript" src="/js/jquery.json-viewer.js"></script>
<script type="text/javascript" src="/js/tool.js"></script>
<script>
    $('#apiTitle').html(opener.document.getElementById("apiTitle").innerHTML);
    var ue = UE.getEditor('editor');

    function apiDocEdit(obj){
        var submitData = $(obj).serialize();
        submitData += '&uri='+$_GET['uri'];
        submitData += '&version='+$_GET['version'];
        console.log(submitData);
        // var requestData = {
        //     'uri' : $_GET['uri'],
        //     'version' : $_GET['version'],
        //     'deatil' : $("#editor").innerHTML
        // };
        var request = $.ajax({
            url: '/v1.0.0/apiDoc.detail',
            method: 'POST',
            timeout: 30000, // 超时时间设置，单位毫秒
            headers: {},
            data: submitData,
        });

        request.done(function(res) {
            alert("完成");
            window.opener.location.reload();
        });

        request.fail(function(jqXHR) {
            alert(jqXHR.responseJSON.msg);
            console.error(jqXHR);
        });

        return false;
    }


</script>
</body>
</html>